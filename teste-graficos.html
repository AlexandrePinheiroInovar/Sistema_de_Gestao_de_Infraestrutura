<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de GrÃ¡ficos</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
    <h1>ğŸ” DiagnÃ³stico dos GrÃ¡ficos</h1>
    
    <div id="diagnostico" style="padding: 20px; background: #f0f0f0; margin: 20px 0;">
        <h2>ğŸ“Š Status das DependÃªncias</h2>
        <div id="status-dependencias">Verificando...</div>
    </div>

    <div id="charts-rankings-container" style="padding: 20px;">
        <div class="loading-charts">
            <p>ğŸ“Š Carregando grÃ¡ficos e rankings...</p>
        </div>
    </div>

    <!-- Carregamento dos scripts do sistema -->
    <script src="src/js/dashboard-charts-novo.js?v=1.0"></script>
    <script src="src/js/dashboard-charts-implementacao.js?v=1.0"></script>

    <script>
        console.log('ğŸš€ [TESTE] Iniciando teste de diagnÃ³stico...');

        function diagnosticar() {
            console.log('ğŸ” [TESTE] Executando diagnÃ³stico completo...');
            
            const status = document.getElementById('status-dependencias');
            let html = '';

            // Verificar Chart.js
            if (typeof Chart !== 'undefined') {
                html += 'âœ… Chart.js carregado<br>';
                console.log('âœ… Chart.js versÃ£o:', Chart.version);
            } else {
                html += 'âŒ Chart.js NÃƒO carregado<br>';
                console.error('âŒ Chart.js nÃ£o estÃ¡ disponÃ­vel');
            }

            // Verificar ChartDataLabels
            if (typeof ChartDataLabels !== 'undefined') {
                html += 'âœ… ChartDataLabels carregado<br>';
            } else {
                html += 'âŒ ChartDataLabels NÃƒO carregado<br>';
                console.error('âŒ ChartDataLabels nÃ£o estÃ¡ disponÃ­vel');
            }

            // Verificar ChartsDashboard
            if (typeof ChartsDashboard !== 'undefined') {
                html += 'âœ… ChartsDashboard carregado<br>';
                
                if (typeof ChartsDashboard.inicializar === 'function') {
                    html += 'âœ… ChartsDashboard.inicializar disponÃ­vel<br>';
                } else {
                    html += 'âŒ ChartsDashboard.inicializar NÃƒO Ã© funÃ§Ã£o<br>';
                }
                
                if (typeof ChartsDashboard.gerarDadosMock === 'function') {
                    html += 'âœ… ChartsDashboard.gerarDadosMock disponÃ­vel<br>';
                } else {
                    html += 'âŒ ChartsDashboard.gerarDadosMock NÃƒO disponÃ­vel<br>';
                }
            } else {
                html += 'âŒ ChartsDashboard NÃƒO carregado<br>';
                console.error('âŒ ChartsDashboard nÃ£o estÃ¡ disponÃ­vel');
            }

            status.innerHTML = html;

            // Tentar inicializar se tudo estiver OK
            if (typeof Chart !== 'undefined' && 
                typeof ChartsDashboard !== 'undefined' && 
                typeof ChartsDashboard.inicializar === 'function') {
                
                console.log('ğŸš€ [TESTE] Tentando inicializar grÃ¡ficos...');
                
                setTimeout(() => {
                    try {
                        ChartsDashboard.inicializar();
                        console.log('âœ… [TESTE] InicializaÃ§Ã£o executada!');
                    } catch (error) {
                        console.error('âŒ [TESTE] Erro na inicializaÃ§Ã£o:', error);
                        status.innerHTML += '<br>âŒ <strong>ERRO na inicializaÃ§Ã£o:</strong> ' + error.message;
                    }
                }, 1000);
            } else {
                console.error('âŒ [TESTE] NÃ£o Ã© possÃ­vel inicializar - dependÃªncias faltando');
                status.innerHTML += '<br>âŒ <strong>NÃ£o Ã© possÃ­vel inicializar - dependÃªncias faltando</strong>';
            }
        }

        // Executar diagnÃ³stico apÃ³s um tempo
        setTimeout(diagnosticar, 2000);
        setTimeout(diagnosticar, 5000);
    </script>
</body>
</html>